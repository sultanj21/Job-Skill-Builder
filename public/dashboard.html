<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial;
            background: #f0f2f5;
            padding: 20px;
        }

        .box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            width: 600px;
            margin-bottom: 20px;
            box-shadow: 0px 4px 12px rgba(0,0,0,0.1);
        }

        .news-panel a {
            display: block;
            padding: 8px;
            border-bottom: 1px solid #eee;
            text-decoration: none;
            color: black;
            font-size: 16px;
        }

        .news-panel a:hover {
            color: #0078ff;
        }
    </style>
</head>
<body>

<h1>Welcome to Your Dashboard ðŸ‘‹</h1>

<!-- UPLOAD BOX -->
<div class="box">
    <h2>Upload Your Resume</h2>

    <form id="resumeForm" enctype="multipart/form-data">
        <input type="file" name="resume" required>
        <button type="submit">Upload</button>
    </form>

    <p id="uploadResult"></p>
</div>

<!-- NEWS PANEL -->
<div class="box news-panel">
    <h2>Latest Yahoo News</h2>
    <div id="news-list">Loading...</div>
</div>

<script>
    // ---------------- UPLOAD RESUME ----------------
    document.getElementById("resumeForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        let formData = new FormData(e.target);

        let res = await fetch("/uploadResume", {
            method: "POST",
            body: formData
        });

        let data = await res.json();
        document.getElementById("uploadResult").innerText = data.message;
    });

    // ---------------- LOAD NEWS ----------------
    async function loadNews() {
        let res = await fetch("/api/news");
        let data = await res.json();

        let container = document.getElementById("news-list");

        if (!data.success) {
            container.innerHTML = "Error loading news.";
            return;
        }

        container.innerHTML = data.articles.map(a => `
                <a href="${a.link}" target="_blank">
                    ${a.title} <br>
                    <small>${new Date(a.pubDate).toLocaleString()}</small>
                </a>
            `).join("");
    }

    loadNews();
</script>

</body>
</html>
