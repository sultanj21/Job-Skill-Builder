<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register · Address</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="container">
  <h2>Step 2 · Address</h2>
  <div class="progress"><span style="width:66%"></span></div>

  <form id="addressForm">
    <div class="form-group">
      <label for="street">Street</label>
      <input id="street" type="text" placeholder="123 Main St"/>
      <div class="error" id="errStreet">Street is required</div>
    </div>
    <div class="form-group">
      <label for="city">City</label>
      <input id="city" type="text" placeholder="City"/>
      <div class="error" id="errCity">City is required</div>
    </div>
    <div class="form-group">
      <label for="state">State</label>
      <input id="state" type="text" placeholder="State"/>
      <div class="error" id="errState">State is required</div>
    </div>
    <div class="form-group">
      <label for="zip">ZIP</label>
      <input id="zip" type="text" placeholder="ZIP / Postal Code"/>
      <div class="error" id="errZip">ZIP is required</div>
    </div>

    <button type="button" id="nextBtn" disabled>Next → College</button>
    <p id="message" class="hidden"></p>
  </form>
</div>

<script>
  const mustHave = ["street","city","state","zip"];
  const nextBtn = document.getElementById("nextBtn");
  const regData = JSON.parse(localStorage.getItem("regData")||"null");
  if(!regData){ alert("Please complete Step 1 first."); location.href="register_personal.html"; }

  function validate(){
    let ok = true;
    const v = id => document.getElementById(id).value.trim();
    const set = (id, cond) => { document.getElementById(id).style.display = cond ? "none":"block"; if(!cond) ok=false; };
    set("errStreet", !!v("street"));
    set("errCity", !!v("city"));
    set("errState", !!v("state"));
    set("errZip", !!v("zip"));
    nextBtn.disabled = !ok;
    nextBtn.classList.toggle("enabled", ok);
    return ok;
  }
  mustHave.forEach(id => document.getElementById(id).addEventListener("input", validate));

  nextBtn.addEventListener("click", () => {
    if(!validate()) return;
    const updated = {
      ...regData,
      street: document.getElementById("street").value.trim(),
      city: document.getElementById("city").value.trim(),
      state: document.getElementById("state").value.trim(),
      zip: document.getElementById("zip").value.trim(),
    };
    localStorage.setItem("regData", JSON.stringify(updated));
    location.href = "register_college.html";
  });
</script>
</body>
</html>
